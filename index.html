<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="bootstrap-4.3.1-dist/css/bootstrap.min.css">
  <!-- Local CSS -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="css/bootstrap-datepicker.standalone.min.css">
  <title class="title">Participant Insurance Registration Form</title>

</head>

<body>

  <img src="img/FGB_logo_rgb_wit_en_tcm264-852539.svg">
  <h2>Registration Form For FGB Research Projects Requiring
    Research Participants Insurance</h2>

  <p>This form must be completed by researchers who are conducting
    WMO-applicable research and who have received a letter from the
    VUmc METc informing them that participant insurance is required.</p>

  <p>If you have previously completed this form, but the end date of your
    research project has been extended and/or the number of participants has
    changed, please fill in this form once again with the new information.
    If you have questions, contact
    <a href="mailto:research.data.fgb@vu.nl">
    research.data.fgb@vu.nl</a>.</p>

  <form action="registration.php" target="_blank" method="post" enctype="multipart/form-data" class="needs-validation"
    novalidate>
    <div class="form-group row">
      <label for="title_res" class="col-sm-2 col-form-label">Title of research project:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="title_res" name="title_res" required>
        <div class="invalid-feedback">
          Enter the title of your research!
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="prot_num" class="col-sm-2 col-form-label">METc protocol number:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="prot_num" name="prot_num" required>
        <div class="invalid-feedback">
          Enter the protocol number!
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="num_part" class="col-sm-2 col-form-label">Number of participants requiring insurance:</label>
      <div class="col-sm-10">
        <input type="number" class="form-control" id="num_part" name="num_part" min="1" required>
        <div class="invalid-feedback">
          Enter the number of participants!
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="end_date" class="col-sm-2 col-form-label">Expected end date of research project:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="end_date" name="end_date" placeholder="dd-mm-yyyy" required>
        <div class="invalid-feedback">
          Enter the (expected) end date!
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="researcher" class="col-sm-2 col-form-label">Name of principal investigator:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="researcher" name="researcher" required>
        <div class="invalid-feedback">
          Enter the PI's name!
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="telephone" class="col-sm-2 col-form-label">Principal investigator's telephone number:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="telephone" name="telephone" pattern="^[0-9-+\s()]*$" required>
        <!-- FIXME: find correct regexp for dutch phone numbers? -->
        <div class="invalid-feedback">
          Enter the PI's phone number!
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="emailPI" class="col-sm-2 col-form-label">Principle investigator's e-mail address:</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" id="emailPI" name="emailPI" required>
        <div class="invalid-feedback">
          Enter the PI's e-mail address!
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="emailother" class="col-sm-2 col-form-label">E-mail address of person completing form
        (if applicable):</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" id="emailother" name="emailother">
      </div>
    </div>
    <div class="form-group row">
      <label for="order_num" class="col-sm-2 col-form-label">Order number (wbs element or kostenplaats):</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="order_num" name="order_num" required>
        <div class="invalid-feedback">
          Enter the order number!
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label for="letter" class="col-sm-2 col-form-label">Letter (PDF) from METc wherein it is stated that
        insurance is required:</label>
      <div class="col-sm-10">
        <input type="hidden" name="MAX_FILE_SIZE" value="30000000" />
        <input type="file" class="form-control" id="letter" name="letter" class="form-control" accept="application/pdf"
          required>
        <div class="invalid-feedback">
          Upload the METc letter!
        </div>
      </div>
    </div>
    <div class="form-group row">

      <input type="submit" class="btn btn-primary btn-large" value="Submit">
    </div>

  </form>
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="js/jquery-3.4.1.min.js"></script>
  <script src="bootstrap-4.3.1-dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/bootstrap-datepicker.min.js"></script>
  <script>
    // datepicker config, use normal dd-mm-yyyy dates, default date +6months
    $('#end_date').datepicker({
      format: "dd-mm-yyyy",
      weekStart: 1, //monday
      defaultViewDate: "+6m",
      language: "en",
      autoclose: true,
      maxViewMode: 2
    });

    // force validation, disable submit button until all fields correct
    (function () {
      //'use strict';
      window.addEventListener('load', function () {
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.getElementsByClassName('needs-validation');
        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function (form) {
          form.addEventListener('submit', function (event) {
            if (form.checkValidity() === false) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add('was-validated');
          }, false);
        });
      }, false);
    })();
  </script>

</body>

</html>
